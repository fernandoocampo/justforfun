package foursum_test

import (
	"testing"

	"github.com/fernandoocampo/justforfun/foursum"
	"github.com/stretchr/testify/assert"
)

func TestFourSum(t *testing.T) {
	cases := map[string]struct {
		nums   []int
		target int
		want   [][]int
	}{
		"[1,0,-1,0,-2,2]:0": {
			nums:   []int{1, 0, -1, 0, -2, 2},
			target: 0,
			want:   [][]int{{-2, -1, 1, 2}, {-2, 0, 0, 2}, {-1, 0, 0, 1}},
		},
		"[2,2,2,2,2]:8": {
			nums:   []int{2, 2, 2, 2, 2},
			target: 8,
			want:   [][]int{{2, 2, 2, 2}},
		},
		"[0]:0": {
			nums:   []int{0},
			target: 0,
			want:   [][]int{},
		},
		"[0,0,0,0]:1": {
			nums:   []int{0, 0, 0, 0},
			target: 1,
			want:   [][]int{},
		},
		"[2,1,0,-1]:2": {
			nums:   []int{2, 1, 0, -1},
			target: 2,
			want:   [][]int{{-1, 0, 1, 2}},
		},
		"long-one": {
			nums:   []int{-483, -476, -475, -460, -450, -431, -428, -419, -410, -374, -347, -345, -311, -303, -299, -286, -278, -271, -260, -257, -240, -227, -217, -203, -196, -191, -189, -179, -171, -151, -150, -144, -134, -130, -112, -107, -97, -96, -94, -70, -62, -54, -38, -38, -23, -12, -11, -2, 2, 4, 30, 33, 38, 51, 51, 54, 69, 90, 108, 111, 112, 112, 121, 129, 163, 182, 184, 194, 198, 199, 210, 228, 229, 232, 236, 237, 249, 249, 259, 282, 303, 312, 317, 329, 329, 342, 349, 368, 375, 380, 384, 393, 420, 433, 441, 446, 460, 474, 497},
			target: -2306,
			want:   nil,
		},
		"long-two": {
			nums:   []int{-492, -479, -468, -447, -432, -428, -418, -406, -388, -369, -300, -275, -238, -231, -228, -225, -224, -221, -220, -219, -189, -186, -180, -144, -130, -73, -67, -66, -55, -54, -53, -19, -6, 13, 28, 36, 47, 57, 80, 82, 87, 97, 97, 120, 132, 142, 148, 174, 176, 176, 205, 225, 232, 238, 245, 247, 264, 268, 268, 275, 319, 334, 387, 392, 412, 413, 426, 434, 442, 451, 475, 478, 485, 490},
			target: 4631,
			want:   nil,
		},
	}
	for name, data := range cases {
		t.Run(name, func(st *testing.T) {
			got := foursum.FourSum(data.nums, data.target)
			assert.Equal(st, data.want, got)
		})
	}
}

func BenchmarkFourSum(b *testing.B) {
	for i := 0; i < b.N; i++ {
		foursum.FourSum([]int{1, 0, -1, 0, -2, 2}, 0)
	}
}
